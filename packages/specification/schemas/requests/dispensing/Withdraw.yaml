type: object
properties:
  resourceType:
    type: string
    enum: [Task]
  id:
    type: string
    example: 6a2624a2-321b-470e-91a6-8ae7a065e2f0
  contained:
    type: array
    items:
      $ref: ../../components/PractitionerRole/TaskPractitionerRole.yaml
  extension:
    type: array
    items:
      oneOf:
      - type: object
        description: test string
        $ref: ../../components/_extensions/ProvenanceAgent.yaml
      - type: object
        description: The treatment type of the prescription, i.e. whether it is an acute, repeat, or eRD prescription.
        properties: 
          coding:
            type: array
            items: 
              $ref: ../../components/_fragments/codes.yaml#/components/schemas/MedicationRequestCourseOfTherapy
      - type: array
        description: |
          FHIR extension array to hold Repeat Information.
          This identifies the instance of the eRD prescription that is being returned.
          Given that all eRD prescriptions have the same prescription ID,
          the combination of Prescription ID and repeat number identifies the issue to withdraw or return.
        items:
          $ref: ../../components/_extensions/EPSRepeatInformation.yaml
  identifier:
    description: The unique identifier for the Withdraw Request.
    type: array
    items:
      $ref: ../../components/_fragments/identifiers.yaml#/components/schemas/Rfc4122
  status: 
    type: string
    enum: [in-progress, active, cancelled, completed, rejected]
  statusReason:
    type: object
    description: The reason the prescription is being withdrawn, which must be coded as per the Withdraw Reason vocabulary.
    properties:
      coding: 
        type: array
        items:
          $ref: ../../components/_fragments/codes.yaml#/components/schemas/EpsTaskDispenseWithdrawStatusReason
  intent:
    type: string
    description: The intent of the Medication Requests being withdrawn.
    enum: [order, original-order, instance-order]
  code: 
    type: object
    properties:
      coding:
        type: array
        items:
          $ref: ../../components/_fragments/codes.yaml#/components/schemas/TaskCode
  groupIdentifier:
    description: The Prescription ID of the prescription that is being withdrawn.
    $ref: ../../components/_fragments/groupIdentifier.yaml
  focus:
    type: object
    description: The release response which released the prescription that is currently being withdrawn.
    properties:
      identifier:
        $ref: ../../components/_fragments/identifiers.yaml#/components/schemas/Rfc4122
  for:
    type: object
    properties: 
      identifier:
        $ref: ../../components/_fragments/identifiers.yaml#/components/schemas/NhsNumber
  authoredOn:
    type: string
    description: The time the prescription is being withdrawn to Spine.
    format: date-time
    example: "2020-12-21T17:03:20-00:00"
  owner:
    type: object
    properties:
      identifier:
        $ref: ../../components/_fragments/identifiers.yaml#/components/schemas/OdsOrganizationCode
  requester:
    type: object
    description: The dispenser withdrawing the prescription.
    properties: 
      reference:
        type: string
        example: "#requester"
