#docker_service_cpu: 256
#docker_service_memory: 512

docker_service:
  - name: eps-coordinator
    expose: true
    environment:
        - name: NODE_ENV
          value: production
        - name: LOG_LEVEL
          value: "{{ 'debug' if APIGEE_ENVIRONMENT == 'internal-dev' else 'info' }}"
    secrets:
        - name: CLIENT_KEY
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/client-key'
        - name: CLIENT_CERT
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/client-cert'
        - name: FROM_ASID
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/from-asid'
        - name: TO_ASID
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/to-asid'
        - name: FROM_PARTY_KEY
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/from-party-key'
        - name: TO_PARTY_KEY
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/to-party-key'
        - name: CPA_ID
          valueFrom: '/{{ account }}/api-deployment/{{ service_name }}/cpa-id'
    health_check:
        matcher: "200"
        path: "/Health"
