# This is an OpenAPI Specification (https://swagger.io/specification/)
# for the Electronic Prescription Service (EPS) API
# owned by NHS Digital (https://digital.nhs.uk/)
openapi: 3.0.0
info:
  title: Electronic Prescription Service (FHIR) API
  version: "{VERSION}"
  contact:
    name: Electronic Prescription Service FHIR API Support
    url: 'https://tbc.api.nhs.net'
    email: tbc-api-support@nhs.net
  description: |
    ## Overview
    Use this API to access the [Electronic Prescription Service (EPS)](https://digital.nhs.uk/services/electronic-prescription-service) - the national service used to send electronic prescriptions from GP surgeries to pharmacies.

    You can:
    * prepare a prescription for signing
    * create a prescription
    * evaluate prescription signing client implementations

    You cannot currently use this API to:
    * cancel a prescription
    * check the status of a prescription
    * release a prescription for dispensing
    * claim for a dispensed prescription

    Currently, this API can only be accessed by healthcare professionals, authenticated with an NHS smartcard or equivalent.

    ## Using this API
    Electronic prescription messages are digitally signed to protect against tampering and to prevent repudiation.
    While the messages themselves are FHIR-based, for reasons of backwards compatibility, the signatures must be
    represented in HL7 V3 format. To make this easier, you can POST a prescription to the /Prepare endpoint to
    receive exactly the HL7 V3 fragments which need to be signed to conform to the specification.
    
    The flow to create a prescription is then:
    * POST a prescription in FHIR format to the /Prepare endpoint
    * Sign the response and put the result in a Provenance resource in the original FHIR prescription
    * POST the signed prescription in FHIR format to the /Send endpoint

    ## Related APIs
    The following APIs also give access to the Electronic Prescription Service:
    - [Electronic Prescription Service (HL7 V3) API](https://data.developer.nhs.uk/dms/mim/4.2.00/Index.htm) - use this if you want to use functions that are not yet available on the FHIR API.
    - [Prescription Tracker API](https://developer.nhs.uk/apis/eps-tracker) - use this if you want a read-only interface to obtain information about a patient’s prescriptions.

    ## API status and roadmap
    All endpoints are in [alpha](https://digital.nhs.uk/developer/developer-reference/reference-guide#api-status) - expect further breaking changes.
    
    The API is currently available for sandbox testing and integration testing, but not for production use.

    The following items are on our roadmap, in rough priority order:
    - TODO

    We are extremely keen to receive feedback on the API during alpha and beta,
    for example if there are data fields missing that you think you need.
    Please [get in touch](/help-and-support) with any comments or suggestions.

    ## Technology
    This API is [RESTful](/introduction-to-apis#basic-rest).

    It also conforms to the [FHIR](/introduction-to-apis#fhir) global standard for health care data exchange.
    Specifically, it is aligned with [FHIR UK Core](https://digital.nhs.uk/services/fhir-uk-core), which is built on FHIR Release 4.

    You don’t need to know much about FHIR to use this API - FHIR APIs are just RESTful APIs that follow specific rules.
    In particular:
    - resource names are capitalised and singular, for example the `/Patient` not `/patients`
    - array names are singular, for example `line` not `lines` for address lines
    - data items that are country-specific and thus not included in the FHIR global base resources are usually wrapped in an `extension` object

    This API is available on the Internet, although access using NHS smartcards (see below)
    currently requires a connection to the [Health and Social Care Network (HSCN)](https://digital.nhs.uk/services/health-and-social-care-network).

    ## Authorisation
    TODO

    ## Testing
    You can test this API in:
    * our [sandbox environment](/testing#sandbox-testing) for initial developer testing (coming soon)
    * our [integration test environment](/testing#integration-testing) for formal integration testing (coming soon)

    Our sandbox environment is a very basic simulation of the live service. It only covers a limited set of scenarios and is stateless, so does not actually persist any updates.

    For more details on sandbox testing, or to try out the sandbox using our "Try this API" feature, see the documentation for each endpoint.

    ## Assurance
    We are hoping to make the assurance process as lightweight and as self-service as possible.

    More details to follow.

    ## Endpoints
    To see details for specific endpoints, select from the list on the left hand side of the page:
    * `POST /Prepare` - convert a FHIR prescription into the HL7 V3 signature fragments to be signed by the prescriber
    * `POST /Send` - send a signed FHIR prescription to Spine
    * `POST /Convert` - convert a FHIR prescription to HL7V3 to verify client signature implementations
servers:
  - url: 'https://internal-qa-sandbox.api.service.nhs.uk/electronic-prescriptions'
    description: 'Internal QA Sandbox environment.'
tags:
  - name: dispensing
  - name: prescribing
paths:
  /Prepare:
    post:
      operationId: prepare-prescription
      summary: Convert prescription to signature fragments
      description: Convert a prescription in FHIR format into the canonicalised HL7 V3 signature fragments which should be signed by the prescriber.
      tags:
        - prescribing
      requestBody:
        required: true
        content:
          #application/fhir+json: #FIXME - should be set to this but we have had to change it due to an Apigee SmartDocs bug.
          application/json:
            schema:
              $ref: components/schemas/Bundle.yaml
            examples:
              example:
                value:
                  $ref: components/examples/PrepareSuccessRequest.json
        description: ''
      responses:
        '200':
          description: Successful conversion.
          content:
            #application/fhir+json: #FIXME - should be set to this but we have had to change it due to a FHIR validator bug
            application/json:
              schema:
                $ref: components/schemas/Parameters.yaml
              examples:
                example:
                  value:
                    $ref: components/examples/PrepareSuccessResponse.yaml
        '4XX':
          description: Invalid request.
          content:
            application/fhir+json:
              schema:
                $ref: components/schemas/OperationOutcome-4XX.yaml
              examples:
                example:
                  value:
                    $ref: components/examples/ClientErrorResponse.yaml
        '5XX':
          description: Server error.
          content:
            application/fhir+json:
              schema:
                $ref: components/schemas/OperationOutcome-5XX.yaml
              examples:
                example:
                  value:
                    $ref: components/examples/ServerErrorResponse.yaml
          headers: {}
  /Send:
    post:
      operationId: send-prescription
      summary: Send a signed prescription to Spine
      description: Submit a signed prescription to EPS
      tags:
        - prescribing
      requestBody:
        required: true
        content:
          #application/fhir+json: FIXME - should be set to this but we have had to change it due to an Apigee SmartDocs bug.
          application/json:
            schema:
              $ref: components/schemas/Bundle.yaml
            examples:
              success:
                value:
                  $ref: components/examples/SendSuccessRequest.json
              # TODO: update patient-deceased example to conform to schema/validation now models are synced, see response
              #patient-deceased:
              #  value:
              #    $ref: components/examples/SendErrorPatientDeceasedRequest.yaml
        description: ''
      responses:
        '200':
          description: Successfully submitted
          content:
            text/plain:
              schema:
                type: string
                example: "Message Sent"
        '4XX':
          description: Invalid request.
          content:
            application/fhir+json:
              schema:
                $ref: components/schemas/OperationOutcome-4XX.yaml
              examples:
                example:
                  value:
                    $ref: components/examples/ClientErrorResponse.yaml
        '5XX':
          description: Server error.
          content:
            application/fhir+json:
              schema:
                $ref: components/schemas/OperationOutcome-5XX-send.yaml
              examples:
                patient-deceased:
                  value:
                    $ref: components/examples/SendErrorPatientDeceasedResponse.yaml
          headers: {}
  /Convert:
    post:
      operationId: convert-prescription
      summary: Convert a prescription to a format used for signing
      description: Convert a prescription from FHIR format into a HL7 V3 representation which can be used to verify signing operations.
      tags:
        - prescribing
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: components/schemas/Bundle.yaml
            examples:
              example:
                value:
                  $ref: components/examples/ConvertSuccessRequest.json
        description: ''
      responses:
        '200':
          description: Successfully submitted
          content:
            application/xml:
              schema:
                type: string
                example:
                  $ref: components/examples/ConvertSuccessResponse.xml
        # Emulate the response example rendered in internal-portal whilst this response model is being iterated on
        # TODO: Add yaml representation of the model to models/responses with conversion to xml to models/dist/responses
        # for use in tests
        # '200':
        #   description: |
        #     Successfully converted prescription.

        #     ### Body

        #     application/xml

        #     **Example**

        #         <?xml encoding="UTF-8" version="1.0"?>
        #           <PORX_IN020101UK31 xmlns="urn:hl7-org:v3">
        #               <id root="A7B86F8D-1DBD-FC28-E050-D20AE3A215F0"/>
        #               <creationTime value="20200610102631"/>
        #               <versionCode code="V3NPfIT3.0"/>
        #               <interactionId extension="PORX_IN020101UK31" root="2.16.840.1.113883.2.1.3.2.4.12"/>
        #               <processingCode code="P"/>
        #               <processingModeCode code="T"/>
        #               <acceptAckCode code="NE"/>
        #               <communicationFunctionRcv>
        #                   <device classCode="DEV" determinerCode="INSTANCE">
        #                       <id extension="000000000001" root="1.2.826.0.1285.0.2.0.107"/>
        #                   </device>
        #               </communicationFunctionRcv>
        #               <communicationFunctionSnd>
        #                   <device classCode="DEV" determinerCode="INSTANCE">
        #                       <id extension="000000000002" root="1.2.826.0.1285.0.2.0.107"/>
        #                   </device>
        #               </communicationFunctionSnd>
        #               <ControlActEvent classCode="CACT" moodCode="EVN">
        #                   <author typeCode="AUT">
        #                       <AgentPersonSDS classCode="AGNT">
        #                           <id extension="B0090,B0100,B1510" root="1.2.826.0.1285.0.2.0.67"/>
        #                           <agentPersonSDS classCode="PSN" determinerCode="INSTANCE">
        #                               <id extension="687227875014" root="1.2.826.0.1285.0.2.0.65"/>
        #                           </agentPersonSDS>
        #                           <part typeCode="PART">
        #                               <partSDSRole classCode="ROL">
        #                                   <id extension="S0080:G0450:R5080" root="1.2.826.0.1285.0.2.1.104"/>
        #                               </partSDSRole>
        #                           </part>
        #                       </AgentPersonSDS>
        #                   </author>
        #                   <author1 typeCode="AUT">
        #                       <AgentSystemSDS classCode="AGNT">
        #                           <agentSystemSDS classCode="DEV" determinerCode="INSTANCE">
        #                               <id extension="0000000003" root="1.2.826.0.1285.0.2.0.107"/>
        #                           </agentSystemSDS>
        #                       </AgentSystemSDS>
        #                   </author1>
        #                   <subject>
        #                       <ParentPrescription classCode="INFO" moodCode="EVN">
        #                           <id root="F68CEA42-E8A0-D799-C874-163048F0D390"/>
        #                           <code code="163501000000109" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Prescription - FocusActOrEvent (record artifact)"/>
        #                           <effectiveTime value="20200610120600"/>
        #                           <typeId extension="PORX_MT132004UK31" root="2.16.840.1.113883.2.1.3.2.4.18.7"/>
        #                           <recordTarget typeCode="RCT">
        #                               <Patient classCode="PAT">
        #                                   <id extension="9453740586" root="2.16.840.1.113883.2.1.4.1"/>
        #                                   <addr use="H">
        #                                       <streetAddressLine>10 CRECY CLOSE</streetAddressLine>
        #                                       <streetAddressLine>DERBY</streetAddressLine>
        #                                       <postalCode>DE22 3JU</postalCode>
        #                                   </addr>
        #                                   <patientPerson classCode="PSN" determinerCode="INSTANCE">
        #                                       <name use="L">
        #                                           <prefix>MR</prefix>
        #                                           <given>HEADLEY</given>
        #                                           <given>TED</given>
        #                                           <family>PENSON</family>
        #                                       </name>
        #                                       <administrativeGenderCode code="0" codeSystem="2.16.840.1.113883.2.1.3.2.4.16.25"/>
        #                                       <birthTime value="19770327"/>
        #                                       <playedProviderPatient classCode="PAT">
        #                                           <subjectOf typeCode="SBJ">
        #                                               <patientCareProvision classCode="PCPR" moodCode="EVN">
        #                                                   <code code="1" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.37"/>
        #                                                   <responsibleParty typeCode="RESP">
        #                                                       <healthCareProvider classCode="PROV">
        #                                                           <id extension="D81015" root="1.2.826.0.1285.0.1.10"/>
        #                                                       </healthCareProvider>
        #                                                   </responsibleParty>
        #                                               </patientCareProvision>
        #                                           </subjectOf>
        #                                       </playedProviderPatient>
        #                                   </patientPerson>
        #                               </Patient>
        #                           </recordTarget>
        #                           <pertinentInformation1 contextConductionInd="true" typeCode="PERT">
        #                               <templateId extension="CSAB_RM-NPfITUK10.pertinentInformation" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                               <pertinentPrescription classCode="SBADM" moodCode="RQO">
        #                                   <id root="A7B86F8D-1D02-FC28-E050-D20AE3A215F0"/>
        #                                   <id extension="4D62E6-D81015-07E5FD" root="2.16.840.1.113883.2.1.3.2.4.18.8"/>
        #                                   <code code="225426007" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Administration of therapeutic substance (procedure)"/>
        #                                   <effectiveTime nullFlavor="NA"/>
        #                                   <author contextControlCode="OP" typeCode="AUT">
        #                                       <time value="20200610120600"/>
        #                                       <signatureText nullFlavor="NA"/>
        #                                       <AgentPerson classCode="AGNT">
        #                                           <id extension="100112897984" root="1.2.826.0.1285.0.2.0.67"/>
        #                                           <code code="R0260" codeSystem="1.2.826.0.1285.0.2.1.104"/>
        #                                           <telecom use="WP" value="tel:01945700223"/>
        #                                           <agentPerson classCode="PSN" determinerCode="INSTANCE">
        #                                               <id extension="8713353" root="1.2.826.0.1285.0.2.0.65"/>
        #                                               <name use="L">
        #                                                   <given>ANDREW</given>
        #                                                   <family>CHANDLER</family>
        #                                               </name>
        #                                           </agentPerson>
        #                                           <representedOrganization classCode="ORG" determinerCode="INSTANCE">
        #                                               <id extension="D81015" root="1.2.826.0.1285.0.1.10"/>
        #                                               <code code="001" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.94"/>
        #                                               <name>PARSON DROVE SURGERY</name>
        #                                               <telecom use="WP" value="tel:01945700223"/>
        #                                               <addr use="WP">
        #                                                   <streetAddressLine>240 MAIN ROAD</streetAddressLine>
        #                                                   <streetAddressLine>PARSON DROVE</streetAddressLine>
        #                                                   <streetAddressLine>WISBECH</streetAddressLine>
        #                                                   <streetAddressLine>CAMBRIDGESHIRE</streetAddressLine>
        #                                                   <postalCode>PE13 4JA</postalCode>
        #                                               </addr>
        #                                               <healthCareProviderLicense classCode="PROV">
        #                                                   <Organization classCode="ORG" determinerCode="INSTANCE">
        #                                                       <id extension="5JK" root="1.2.826.0.1285.0.1.10"/>
        #                                                       <code code="005" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.94"/>
        #                                                       <name>GREATER DERBY PCT</name>
        #                                                   </Organization>
        #                                               </healthCareProviderLicense>
        #                                           </representedOrganization>
        #                                       </AgentPerson>
        #                                   </author>
        #                                   <responsibleParty contextControlCode="OP" typeCode="RESP">
        #                                       <AgentPerson classCode="AGNT">
        #                                           <id extension="100112897984" root="1.2.826.0.1285.0.2.0.67"/>
        #                                           <code code="R0260" codeSystem="1.2.826.0.1285.0.2.1.104"/>
        #                                           <telecom use="WP" value="tel:01945700223"/>
        #                                           <agentPerson classCode="PSN" determinerCode="INSTANCE">
        #                                               <id extension="8713353" root="1.2.826.0.1285.0.2.0.65"/>
        #                                               <name use="L">
        #                                                   <given>ANDREW</given>
        #                                                   <family>CHANDLER</family>
        #                                               </name>
        #                                           </agentPerson>
        #                                           <representedOrganization classCode="ORG" determinerCode="INSTANCE">
        #                                               <id extension="D81015" root="1.2.826.0.1285.0.1.10"/>
        #                                               <code code="001" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.94"/>
        #                                               <name>PARSON DROVE SURGERY</name>
        #                                               <telecom use="WP" value="tel:01945700223"/>
        #                                               <addr use="WP">
        #                                                   <streetAddressLine>240 MAIN ROAD</streetAddressLine>
        #                                                   <streetAddressLine>PARSON DROVE</streetAddressLine>
        #                                                   <streetAddressLine>WISBECH</streetAddressLine>
        #                                                   <streetAddressLine>CAMBRIDGESHIRE</streetAddressLine>
        #                                                   <postalCode>PE13 4JA</postalCode>
        #                                               </addr>
        #                                               <healthCareProviderLicense classCode="PROV">
        #                                                   <Organization classCode="ORG" determinerCode="INSTANCE">
        #                                                       <id extension="5JK" root="1.2.826.0.1285.0.1.10"/>
        #                                                       <code code="005" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.94"/>
        #                                                       <name>GREATER DERBY PCT</name>
        #                                                   </Organization>
        #                                               </healthCareProviderLicense>
        #                                           </representedOrganization>
        #                                       </AgentPerson>
        #                                   </responsibleParty>
        #                                   <pertinentInformation5 contextConductionInd="true" typeCode="PERT">
        #                                       <seperatableInd value="false"/>
        #                                       <pertinentPrescriptionTreatmentType classCode="OBS" moodCode="EVN">
        #                                           <code code="PTT" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                           <value code="0003" codeSystem="2.16.840.1.113883.2.1.3.2.4.16.36"/>
        #                                       </pertinentPrescriptionTreatmentType>
        #                                   </pertinentInformation5>
        #                                   <pertinentInformation1 contextConductionInd="true" typeCode="PERT">
        #                                       <seperatableInd value="true"/>
        #                                       <pertinentDispensingSitePreference classCode="OBS" moodCode="EVN">
        #                                           <code code="DSP" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                           <value code="0004" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.21"/>
        #                                       </pertinentDispensingSitePreference>
        #                                   </pertinentInformation1>
        #                                   <pertinentInformation2 contextConductionInd="true" inversionInd="false" negationInd="false" typeCode="PERT">
        #                                       <seperatableInd value="true"/>
        #                                       <templateId extension="CSAB_RM-NPfITUK10.sourceOf2" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                                       <pertinentLineItem classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D81-FC28-E050-D20AE3A215F0"/>
        #                                           <code code="225426007" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Administration of therapeutic substance (procedure)"/>
        #                                           <effectiveTime nullFlavor="NA"/>
        #                                           <product contextControlCode="OP" typeCode="PRD">
        #                                               <manufacturedProduct classCode="MANU">
        #                                                   <manufacturedRequestedMaterial classCode="MMAT" determinerCode="KIND">
        #                                                       <code code="15748611000001101" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="DermaSilk round neck shirt adult female small (Espere Healthcare Ltd)"/>
        #                                                   </manufacturedRequestedMaterial>
        #                                               </manufacturedProduct>
        #                                           </product>
        #                                           <component typeCode="COMP">
        #                                               <seperatableInd value="false"/>
        #                                               <lineItemQuantity classCode="SPLY" moodCode="RQO">
        #                                                   <code code="373784005" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Dispensing medication (procedure)"/>
        #                                                   <quantity unit="1" value="1">
        #                                                       <translation code="3318711000001107" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="device" value="1"/>
        #                                                   </quantity>
        #                                               </lineItemQuantity>
        #                                           </component>
        #                                           <pertinentInformation2 contextConductionInd="true" typeCode="PERT">
        #                                               <seperatableInd value="false"/>
        #                                               <pertinentDosageInstructions classCode="OBS" moodCode="EVN">
        #                                                   <code code="DI" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                                   <value>As Directed</value>
        #                                               </pertinentDosageInstructions>
        #                                           </pertinentInformation2>
        #                                       </pertinentLineItem>
        #                                   </pertinentInformation2>
        #                                   <pertinentInformation2 contextConductionInd="true" inversionInd="false" negationInd="false" typeCode="PERT">
        #                                       <seperatableInd value="true"/>
        #                                       <templateId extension="CSAB_RM-NPfITUK10.sourceOf2" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                                       <pertinentLineItem classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D86-FC28-E050-D20AE3A215F0"/>
        #                                           <code code="225426007" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Administration of therapeutic substance (procedure)"/>
        #                                           <effectiveTime nullFlavor="NA"/>
        #                                           <product contextControlCode="OP" typeCode="PRD">
        #                                               <manufacturedProduct classCode="MANU">
        #                                                   <manufacturedRequestedMaterial classCode="MMAT" determinerCode="KIND">
        #                                                       <code code="42111000001107" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Microgynon 30 tablets (Bayer Plc)"/>
        #                                                   </manufacturedRequestedMaterial>
        #                                               </manufacturedProduct>
        #                                           </product>
        #                                           <component typeCode="COMP">
        #                                               <seperatableInd value="false"/>
        #                                               <lineItemQuantity classCode="SPLY" moodCode="RQO">
        #                                                   <code code="373784005" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Dispensing medication (procedure)"/>
        #                                                   <quantity unit="1" value="63">
        #                                                       <translation code="428673006" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="tablet" value="63"/>
        #                                                   </quantity>
        #                                               </lineItemQuantity>
        #                                           </component>
        #                                           <pertinentInformation2 contextConductionInd="true" typeCode="PERT">
        #                                               <seperatableInd value="false"/>
        #                                               <pertinentDosageInstructions classCode="OBS" moodCode="EVN">
        #                                                   <code code="DI" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                                   <value>As Directed</value>
        #                                               </pertinentDosageInstructions>
        #                                           </pertinentInformation2>
        #                                       </pertinentLineItem>
        #                                   </pertinentInformation2>
        #                                   <pertinentInformation2 contextConductionInd="true" inversionInd="false" negationInd="false" typeCode="PERT">
        #                                       <seperatableInd value="true"/>
        #                                       <templateId extension="CSAB_RM-NPfITUK10.sourceOf2" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                                       <pertinentLineItem classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D8B-FC28-E050-D20AE3A215F0"/>
        #                                           <code code="225426007" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Administration of therapeutic substance (procedure)"/>
        #                                           <effectiveTime nullFlavor="NA"/>
        #                                           <product contextControlCode="OP" typeCode="PRD">
        #                                               <manufacturedProduct classCode="MANU">
        #                                                   <manufacturedRequestedMaterial classCode="MMAT" determinerCode="KIND">
        #                                                       <code code="7138411000001109" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Nelaton catheter female 14Ch ZT02017182 (Unomedical Ltd)"/>
        #                                                   </manufacturedRequestedMaterial>
        #                                               </manufacturedProduct>
        #                                           </product>
        #                                           <component typeCode="COMP">
        #                                               <seperatableInd value="false"/>
        #                                               <lineItemQuantity classCode="SPLY" moodCode="RQO">
        #                                                   <code code="373784005" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Dispensing medication (procedure)"/>
        #                                                   <quantity unit="1" value="10">
        #                                                       <translation code="3319911000001101" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="catheter" value="10"/>
        #                                                   </quantity>
        #                                               </lineItemQuantity>
        #                                           </component>
        #                                           <pertinentInformation2 contextConductionInd="true" typeCode="PERT">
        #                                               <seperatableInd value="false"/>
        #                                               <pertinentDosageInstructions classCode="OBS" moodCode="EVN">
        #                                                   <code code="DI" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                                   <value>As Directed</value>
        #                                               </pertinentDosageInstructions>
        #                                           </pertinentInformation2>
        #                                       </pertinentLineItem>
        #                                   </pertinentInformation2>
        #                                   <pertinentInformation2 contextConductionInd="true" inversionInd="false" negationInd="false" typeCode="PERT">
        #                                       <seperatableInd value="true"/>
        #                                       <templateId extension="CSAB_RM-NPfITUK10.sourceOf2" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                                       <pertinentLineItem classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D90-FC28-E050-D20AE3A215F0"/>
        #                                           <code code="225426007" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Administration of therapeutic substance (procedure)"/>
        #                                           <effectiveTime nullFlavor="NA"/>
        #                                           <product contextControlCode="OP" typeCode="PRD">
        #                                               <manufacturedProduct classCode="MANU">
        #                                                   <manufacturedRequestedMaterial classCode="MMAT" determinerCode="KIND">
        #                                                       <code code="20988311000001103" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Optifast shake oral powder 54g sachets (Flavour Not Specified)"/>
        #                                                   </manufacturedRequestedMaterial>
        #                                               </manufacturedProduct>
        #                                           </product>
        #                                           <component typeCode="COMP">
        #                                               <seperatableInd value="false"/>
        #                                               <lineItemQuantity classCode="SPLY" moodCode="RQO">
        #                                                   <code code="373784005" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Dispensing medication (procedure)"/>
        #                                                   <quantity unit="1" value="54">
        #                                                       <translation code="3318911000001109" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="sachet" value="54"/>
        #                                                   </quantity>
        #                                               </lineItemQuantity>
        #                                           </component>
        #                                           <pertinentInformation2 contextConductionInd="true" typeCode="PERT">
        #                                               <seperatableInd value="false"/>
        #                                               <pertinentDosageInstructions classCode="OBS" moodCode="EVN">
        #                                                   <code code="DI" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                                   <value>As Directed</value>
        #                                               </pertinentDosageInstructions>
        #                                           </pertinentInformation2>
        #                                       </pertinentLineItem>
        #                                   </pertinentInformation2>
        #                                   <pertinentInformation8 contextConductionInd="true" typeCode="PERT">
        #                                       <seperatableInd value="false"/>
        #                                       <pertinentTokenIssued classCode="OBS" moodCode="EVN">
        #                                           <code code="TI" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                           <value value="false"/>
        #                                       </pertinentTokenIssued>
        #                                   </pertinentInformation8>
        #                                   <pertinentInformation4 contextConductionInd="true" typeCode="PERT">
        #                                       <seperatableInd value="false"/>
        #                                       <pertinentPrescriptionType classCode="OBS" moodCode="EVN">
        #                                           <code code="PT" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.30"/>
        #                                           <value code="0101" codeSystem="2.16.840.1.113883.2.1.3.2.4.17.25"/>
        #                                       </pertinentPrescriptionType>
        #                                   </pertinentInformation4>
        #                               </pertinentPrescription>
        #                           </pertinentInformation1>
        #                           <pertinentInformation2 typeCode="PERT">
        #                               <templateId extension="CSAB_RM-NPfITUK10.pertinentInformation1" root="2.16.840.1.113883.2.1.3.2.4.18.2"/>
        #                               <pertinentCareRecordElementCategory classCode="CATEGORY" moodCode="EVN">
        #                                   <code code="185361000000102" codeSystem="2.16.840.1.113883.2.1.3.2.4.15" displayName="Medication - care record element (record artifact)"/>
        #                                   <component typeCode="COMP">
        #                                       <actRef classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D81-FC28-E050-D20AE3A215F0"/>
        #                                       </actRef>
        #                                   </component>
        #                                   <component typeCode="COMP">
        #                                       <actRef classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D86-FC28-E050-D20AE3A215F0"/>
        #                                       </actRef>
        #                                   </component>
        #                                   <component typeCode="COMP">
        #                                       <actRef classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D8B-FC28-E050-D20AE3A215F0"/>
        #                                       </actRef>
        #                                   </component>
        #                                   <component typeCode="COMP">
        #                                       <actRef classCode="SBADM" moodCode="RQO">
        #                                           <id root="A7B86F8D-1D90-FC28-E050-D20AE3A215F0"/>
        #                                       </actRef>
        #                                   </component>
        #                               </pertinentCareRecordElementCategory>
        #                           </pertinentInformation2>
        #                       </ParentPrescription>
        #                   </subject>
        #               </ControlActEvent>
        #           </PORX_IN020101UK31>
components:
  schemas:
    Bundle:
      $ref: components/schemas/Bundle.yaml
    MedicationRequest:
      $ref: components/schemas/MedicationRequest.yaml
    Patient:
      $ref: components/schemas/Patient.yaml
    Practitioner:
      $ref: components/schemas/Practitioner.yaml
    PractitionerRole:
      $ref: components/schemas/PractitionerRole.yaml
    Organization:
      $ref: components/schemas/Organization.yaml
    Binary:
      $ref: components/schemas/Binary.yaml
    Provenance:
      $ref: components/schemas/Provenance.yaml
